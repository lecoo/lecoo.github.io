<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>dockerå¸¸ç”¨å‘½ä»¤ | é­”ã®kyoçš„å·¥ä½œå®¤</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><div class="darkmode-toggle">ğŸŒ“</div><script>var prefersDarkMode = window.matchMedia('(prefers-color-scheme: dark)');
var toggle = document.querySelector('.darkmode-toggle');
var html = document.querySelector('html');

html.dataset.dark = localStorage.dark || prefersDarkMode.matches;

toggle.addEventListener('click', () => {
localStorage.dark = !(html.dataset.dark == 'true');
html.dataset.dark = localStorage.dark;
});</script><meta name="generator" content="Hexo 6.1.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">dockerå¸¸ç”¨å‘½ä»¤</h1><a id="logo" href="/.">é­”ã®kyoçš„å·¥ä½œå®¤</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> é¦–é¡µ</i></a><a href="/archives/"><i class="fa fa-archive"> å½’æ¡£</i></a><a href="/about/"><i class="fa fa-user"> å…³äº</i></a><a href="/atom.xml"><i class="fa fa-rss"> è®¢é˜…</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">dockerå¸¸ç”¨å‘½ä»¤</h1><div class="post-meta">2022-03-28<script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> é˜…è¯»</span></span></div><div class="post-content"><h4><span id="å¯åŠ¨ä¸€ä¸ªå®¹å™¨">å¯åŠ¨ä¸€ä¸ªå®¹å™¨</span></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -h å®¹å™¨ä¸»æœºå --name å®¹å™¨å -Pdit é•œåƒå</span><br></pre></td></tr></table></figure>

<h4><span id="å¯åŠ¨ä¸€ä¸ªæ–°çš„bashè¿›è¡Œç®¡ç†">å¯åŠ¨ä¸€ä¸ªæ–°çš„bashè¿›è¡Œç®¡ç†</span></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it å®¹å™¨å bash</span><br></pre></td></tr></table></figure>

<h4><span id="å…¶ä»–å¸¸ç”¨å‘½ä»¤">å…¶ä»–å¸¸ç”¨å‘½ä»¤</span></h4><table>
<thead>
<tr>
<th></th>
<th>é•œåƒ</th>
<th>å®¹å™¨</th>
</tr>
</thead>
<tbody><tr>
<td>åˆ›å»º</td>
<td>build -t&#x2F;commit</td>
<td>create&#x2F;run</td>
</tr>
<tr>
<td>åˆ é™¤</td>
<td>rmi</td>
<td>rm</td>
</tr>
<tr>
<td>é‡å‘½å</td>
<td>tag+rmi</td>
<td>rename</td>
</tr>
<tr>
<td>æŸ¥çœ‹åˆ—è¡¨</td>
<td>images</td>
<td>ps&#x2F;ps -a&#x2F;ps -l -q</td>
</tr>
<tr>
<td>è¿è¡ŒçŠ¶æ€</td>
<td>stats</td>
<td>top</td>
</tr>
<tr>
<td>æŸ¥çœ‹æ—¥å¿—</td>
<td>history</td>
<td>logs</td>
</tr>
<tr>
<td>ç™»å½•</td>
<td>login</td>
<td></td>
</tr>
<tr>
<td>æ‹‰å–</td>
<td>pull</td>
<td></td>
</tr>
<tr>
<td>æ¨é€</td>
<td>push</td>
<td></td>
</tr>
<tr>
<td>æŸ¥æ‰¾</td>
<td>search</td>
<td></td>
</tr>
<tr>
<td>æŸ¥çœ‹å®¹å™¨ä¿¡æ¯</td>
<td></td>
<td>inspect</td>
</tr>
<tr>
<td>å‘ä¿¡å·</td>
<td></td>
<td>kill</td>
</tr>
<tr>
<td>é™„åˆ°ä¸»è¿›ç¨‹</td>
<td></td>
<td>attach</td>
</tr>
<tr>
<td>æ‰§è¡Œæ–°è¿›ç¨‹</td>
<td></td>
<td>exec</td>
</tr>
</tbody></table>
<h4><span id="docker-run-å¸¸ç”¨å‚æ•°">docker run å¸¸ç”¨å‚æ•°</span></h4><p>-d   # åå°è¿è¡Œ<br>-it   # æ‰“å¼€STDINï¼Œæ”¯æŒç»ˆç«¯ç™»å½•<br>â€“name &lt;å®¹å™¨å&gt;<br>-h &lt;ä¸»æœºå&gt;<br>-P   # éšæœºæ˜ å°„æ‰€æœ‰é…ç½®åœ¨EXPOSEä¸­çš„ç«¯å£<br>-p [&lt;å®¿ä¸»ç«¯å£&gt;:]&lt;å®¹å™¨ç«¯å£&gt; # æŒ‡å®šæ˜ å°„ä¸€ä¸ªç«¯å£ï¼Œä¸æŒ‡å®šå®¿ä¸»ç«¯å£æ—¶è¡¨ç¤ºéšæœº<br>â€“expose &lt;å®¹å™¨ç«¯å£&gt;  # æŒ‡å®šæš´éœ²ä¸€ä¸ªå®¹å™¨ç«¯å£ï¼Œä½†ä¸æ˜ å°„åˆ°å®¿ä¸»æœº<br>-v &lt;å®¿ä¸»è·¯å¾„&gt;:&lt;å®¹å™¨è·¯å¾„&gt;[:ro|:rw] # å·æ˜ å°„ï¼Œå®¹å™¨è·¯å¾„ä¸å­˜åœ¨æ—¶è‡ªåŠ¨åˆ›å»ºï¼Œroè¡¨ç¤ºåªè¯»ï¼Œé»˜è®¤æ˜¯rwè¡¨ç¤ºè¯»å†™<br>â€“volumes-from &lt;å®¹å™¨å&gt; # æŒ‡å®šå®¹å™¨é‡Œçš„æ‰€æœ‰å·éƒ½å°†åŠ å…¥åˆ°æ–°åˆ›å»ºçš„å®¹å™¨é‡Œ<br>â€“network &lt;ç½‘ç»œå&gt; # é»˜è®¤bridgeï¼ŒåŒä¸€ä¸ªéé»˜è®¤ç½‘ç»œä¸‹çš„å®¹å™¨å¯ä»¥ä½¿ç”¨ä¸»æœºåç›¸äº’è®¿é—®ï¼Œç‰¹åˆ«çš„ï¼Œå¦‚æœè®¾ç½®ä¸º	hostï¼Œè¡¨ç¤ºå’Œå®¿ä¸»æœºå…±ç”¨ç½‘ç»œï¼Œè¿™æ—¶å®¹å™¨å†…ç»‘å®šçš„ç«¯å£éƒ½å°†ç›´æ¥ç»‘å®šåˆ°å®¿ä¸»æœºè€Œä¸éœ€è¦é€šè¿‡-på»ºç«‹æ˜ å°„<br>â€“link &lt;å®¹å™¨å&gt;:&lt;ä¸»æœºå&gt;  # åœ¨æ–°åˆ›å»ºçš„å®¹å™¨é‡Œå¯ä»¥é€šè¿‡ä¸»æœºåè®¿é—®å¦ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨<br>â€“add-host &lt;ä¸»æœºå&gt;:<ip> # æŒ‡å®šä¸»æœºåè§£ææ·»åŠ åˆ°&#x2F;etc&#x2F;hostsæ–‡ä»¶<br>â€“env &lt;ç¯å¢ƒå˜é‡å&gt;&#x3D;&lt;ç¯å¢ƒå˜é‡å€¼&gt;  # è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œ-e é€‰é¡¹å¯ä»¥é‡å¤å¤šæ¬¡<br>â€“env-file &lt;ç¯å¢ƒå˜é‡æ–‡ä»¶&gt;  # æŒ‡å®šç¯å¢ƒå˜é‡æ–‡ä»¶ï¼Œæ¢è¡Œç¬¦åˆ†å‰²<br>â€“user &lt;ç”¨æˆ·å&gt;<br>â€“workdir &lt;å·¥ä½œç›®å½•&gt;<br>â€“mac-address&#x3D;â€xx:xx:xx:xx:xx:xxâ€   # æŒ‡å®šMACåœ°å€<br>â€“ip&#x3D;â€x.x.x.xâ€  # æŒ‡å®šIPåœ°å€</ip></p>
<h5><span id="å…³äºèµ„æºé™åˆ¶çš„å‚æ•°">å…³äºèµ„æºé™åˆ¶çš„å‚æ•°ï¼š</span></h5><p>â€“cpuset-cpus&#x3D;â€1,3â€ # é™åˆ¶åœ¨æ ¸1ã€3ä¸Šè¿è¡Œ<br>â€“memory&#x3D;1G # é™åˆ¶å†…å­˜æœ€å¤§ä½¿ç”¨1G<br>â€“device-read-bps &#x2F;dev&#x2F;sdd:40mb # é™åˆ¶è¯»å–sddçš„é€Ÿåº¦æœ€å¤§40mb<br>â€“device-write-bps &#x2F;dev&#x2F;sdd:30mb # é™åˆ¶å†™å…¥sddçš„é€Ÿåº¦æœ€å¤§30mb<br>ï¼ˆæœºæ¢°ç¡¬ç›˜è¯»å†™é€Ÿåº¦æ˜¯60-80MBï¼Œå›ºæ€ç¡¬ç›˜è¯»å†™é€Ÿåº¦æ˜¯130~300MBï¼Œéƒ½æ˜¯å†™æ…¢è¯»å¿«ï¼‰</p>
<h4><span id="docker-network-å¸¸ç”¨å‚æ•°">docker network å¸¸ç”¨å‚æ•°</span></h4><p>  create [â€“gateway&#x3D;192.168.1.1] [â€“subnet&#x3D;192.168.1.0&#x2F;24] &lt;ç½‘ç»œå&gt;   # åˆ›å»ºä¸€ä¸ªæ–°çš„ç½‘ç»œ<br>  connect &lt;ç½‘ç»œå&gt; &lt;å®¹å™¨å&gt;  # å‘ä¸€ä¸ªç½‘ç»œä¸­æ·»åŠ ä¸€ä¸ªå®¹å™¨<br>  disconnect &lt;ç½‘ç»œå&gt; &lt;å®¹å™¨å&gt;  # ä»ä¸€ä¸ªç½‘ç»œä¸­ç§»é™¤ä¸€ä¸ªå®¹å™¨<br>  inspect &lt;ç½‘ç»œå&gt;   # æŸ¥çœ‹æŒ‡å®šç½‘ç»œè¯¦ç»†ä¿¡æ¯<br>  ls              # æŸ¥çœ‹ç½‘ç»œåˆ—è¡¨<br>  rm &lt;ç½‘ç»œå&gt;  # åˆ é™¤æŒ‡å®šç½‘ç»œ<br>  prune      # åˆ é™¤æ‰€æœ‰æœªä½¿ç”¨çš„ç½‘ç»œ</p>
<h4><span id="docker-inspect-å¸¸ç”¨å‚æ•°">docker inspect å¸¸ç”¨å‚æ•°</span></h4><p>â€“format formatçš„ç”¨æ³•æ¯”è¾ƒå¤æ‚ï¼Œç”¨å‡ ä¸ªé€çº§æ·±å…¥çš„ä¾‹å­æ¼”ç¤ºï¼Œäº‹å®ä¸Šæˆ‘é€šå¸¸æŠŠdocker_ip, docker_volumeè®¾æˆLinuxåˆ«åæ–¹ä¾¿ä½¿ç”¨</p>
<p>docker_id æŸ¥çœ‹å®¹å™¨çš„Id</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect --format=&#x27;&#123;&#123;.Id&#125;&#125;&#x27; å®¹å™¨å</span><br></pre></td></tr></table></figure>

<p>docker_ip æŸ¥çœ‹å®¹å™¨åœ¨æ‰€æœ‰ç½‘ç»œä¸­åˆ†é…çš„æ‰€æœ‰çš„ip</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect --format=&#x27;&#123;&#123;range .NetworkSettings.Networks&#125;&#125;&#123;&#123;println .IPAddress&#125;&#125;&#123;&#123;end&#125;&#125;&#x27; å®¹å™¨å</span><br></pre></td></tr></table></figure>

<p>docker_volume æŸ¥çœ‹å®¹å™¨çš„å·</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect --format=&#x27;&#123;&#123;range .Mounts&#125;&#125;&#123;&#123;.Source&#125;&#125;:&#123;&#123;.Destination&#125;&#125;&#123;&#123;println&#125;&#125;&#123;&#123;end&#125;&#125;&#x27; å®¹å™¨å</span><br></pre></td></tr></table></figure>

<p>docker_port æŸ¥çœ‹å®¹å™¨æ‰€æœ‰çš„ç«¯å£æ˜ å°„æƒ…å†µï¼Œç”¨docker inspectå®ç° docker portå‘½ä»¤</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect --format=&#x27;&#123;&#123;range $p, $conf := .NetworkSettings.Ports&#125;&#125;&#123;&#123;range $conf&#125;&#125;&#123;&#123;$p&#125;&#125; -&gt; &#123;&#123;.HostIp&#125;&#125;:&#123;&#123;.HostPort&#125;&#125;&#123;&#123;println&#125;&#125;&#123;&#123;end&#125;&#125;&#123;&#123;end&#125;&#125;&#x27; å®¹å™¨å</span><br></pre></td></tr></table></figure>

</div><div class="tags"><a href="/tagsdocker"><i class="fa fa-tag">docker</i></a></div><div class="post-nav"><a class="pre" href="/2022/04/07/binlog2sql/">ä½¿ç”¨binlog2sqlè¿˜åŸæ•°æ®åˆ°ä»»æ„æ—¶é—´ç‚¹</a><a class="next" href="/2022/02/21/password-in-sh/">åœ¨Shellè„šæœ¬ä¸­è¾“å…¥å¯†ç </a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> åˆ†ç±»</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> æ ‡ç­¾</i></div><div class="tagcloud"><a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/pandas/" style="font-size: 15px;">pandas</a> <a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/Hexo/" style="font-size: 15px;">Hexo</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/trouble-shooting/" style="font-size: 15px;">trouble-shooting</a> <a href="/tags/nfs/" style="font-size: 15px;">nfs</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/ssh-tunnel/" style="font-size: 15px;">ssh-tunnel</a> <a href="/tags/vpn/" style="font-size: 15px;">vpn</a> <a href="/tags/vue-js/" style="font-size: 15px;">vue.js</a> <a href="/tags/WSL/" style="font-size: 15px;">WSL</a> <a href="/tags/PostgreSQL/" style="font-size: 15px;">PostgreSQL</a> <a href="/tags/wsl/" style="font-size: 15px;">wsl</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> æœ€è¿‘æ–‡ç« </i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2022/04/20/wsl-backup-restore/">WSLå¤‡ä»½ä¸è¿˜åŸï¼ˆå®‰è£…è·¯å¾„è¿ç§»ï¼‰</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/04/16/wsl-install/">ç”¨WSLå®‰è£…Ubuntu</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/04/15/hexo-typora-img/">å…¼å®¹hexoå’Œtyporaçš„å›¾ç‰‡æ’å…¥æ–¹å¼</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/04/08/ssh-tunnel-docker-vpn/">ä½¿ç”¨SSH Tunnel+Dockerå®ç°ç±»ä¼¼VPNçš„åŠŸèƒ½</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/04/07/binlog2sql/">ä½¿ç”¨binlog2sqlè¿˜åŸæ•°æ®åˆ°ä»»æ„æ—¶é—´ç‚¹</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/03/28/docker/">dockerå¸¸ç”¨å‘½ä»¤</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/02/21/password-in-sh/">åœ¨Shellè„šæœ¬ä¸­è¾“å…¥å¯†ç </a></li><li class="post-list-item"><a class="post-list-link" href="/2022/02/08/migra-git-repository/">è¿ç§»gité¡¹ç›®</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/12/23/df-to-excel-set-width/">pandas df.to_excel è®¾ç½®åˆ—å®½é‡åˆ° AttributeError: 'Worksheet' object has no attribute 'column_dimensions'</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/10/25/linux-mount-error-on-boot/">è®°ä¸€æ¬¡Linuxå› ç¡¬ç›˜è®¾å¤‡ç¼–å·é”™ä½æŒ‚è½½å¤±è´¥å¼•èµ·å¯åŠ¨å¤±è´¥çš„è§£å†³è¿‡ç¨‹</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> å‹æƒ…é“¾æ¥</i></div><ul></ul><a href="http://www.cnitblog.com/luckydmz/" title="é­”ã®kyoçš„å·¥ä½œå®¤ï¼ˆæ—§ç«™ï¼‰" target="_blank">é­”ã®kyoçš„å·¥ä½œå®¤ï¼ˆæ—§ç«™ï¼‰</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright Â© 2022 <a href="/." rel="nofollow">é­”ã®kyoçš„å·¥ä½œå®¤.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><link rel="stylesheet" type="text/css" href="/css/search.css?v=1.0.0"><script type="text/javascript" src="/js/search.js?v=1.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
  search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/copycode.js?v=1.0.0" successtext="å¤åˆ¶æˆåŠŸ!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css?v=1.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>